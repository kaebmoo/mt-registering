<!-- templates/partials/meeting_card.html -->

<div class="card">
    <div class="content">
        <!-- Header with meeting type badge -->
        <div class="header">
            <i class="calendar outline icon"></i> {{ meeting.topic }}
        </div>
        
        <div class="meta" style="margin-top: 10px;">
            {% if meeting.meeting_type == 'online' %}
                <span class="ui green label">
                    <i class="video icon"></i> ประชุมออนไลน์
                </span>
            {% elif meeting.meeting_type == 'hybrid' %}
                <span class="ui blue label">
                    <i class="arrows alternate horizontal icon"></i> ประชุมแบบผสมผสาน
                </span>
            {% else %}
                <span class="ui gray label">
                    <i class="building icon"></i> ประชุม ณ สถานที่
                </span>
            {% endif %}
            
            <!-- แสดงสถานะเวลา -->
            {% if meeting in ongoing_meetings %}
                <span class="ui red label">
                    <i class="circle icon"></i> กำลังดำเนินการ
                </span>
            {% elif meeting in today_meetings %}
                <span class="ui orange label">
                    <i class="clock icon"></i> วันนี้
                </span>
            {% endif %}
        </div>
        
        <div class="description" style="margin-top: 15px;">
            <!-- Date and Time -->
            <div class="ui list">
                <div class="item">
                    <i class="calendar icon"></i>
                    <div class="content">
                        <strong>วันที่:</strong> 
                        {{ meeting.meeting_date.strftime('%d/%m/%Y') }}
                        {% if meeting.meeting_date == today %}
                            <span class="ui mini orange label">วันนี้</span>
                        {% elif meeting.meeting_date == tomorrow %}
                            <span class="ui mini blue label">พรุ่งนี้</span>
                        {% endif %}
                    </div>
                </div>
                <div class="item">
                    <i class="clock icon"></i>
                    <div class="content">
                        <strong>เวลา:</strong> 
                        {{ meeting.start_time.strftime('%H:%M') }} - {{ meeting.end_time.strftime('%H:%M') }} น.
                    </div>
                </div>
                
                <!-- Meeting Type Info -->
                {% if meeting.meeting_type == 'online' %}
                    <div class="item">
                        <i class="video icon"></i>
                        <div class="content">
                            <strong>รูปแบบ:</strong> ประชุมออนไลน์
                        </div>
                    </div>
                {% elif meeting.meeting_type == 'hybrid' %}
                    <div class="item">
                        <i class="arrows alternate horizontal icon"></i>
                        <div class="content">
                            <strong>รูปแบบ:</strong> Onsite + Online
                        </div>
                    </div>
                    {% if meeting.room %}
                    <div class="item">
                        <i class="map marker icon"></i>
                        <div class="content">
                            ห้อง {{ meeting.room }} 
                            {% if meeting.floor %}ชั้น {{ meeting.floor }}{% endif %}
                            {% if meeting.building %} อาคาร {{ meeting.building }}{% endif %}
                        </div>
                    </div>
                    {% endif %}
                {% else %}
                    {% if meeting.room %}
                    <div class="item">
                        <i class="map marker alternate icon"></i>
                        <div class="content">
                            <strong>สถานที่:</strong> 
                            ห้อง {{ meeting.room }}
                            {% if meeting.floor %} ชั้น {{ meeting.floor }}{% endif %}
                            {% if meeting.building %} อาคาร {{ meeting.building }}{% endif %}
                        </div>
                    </div>
                    {% endif %}
                {% endif %}
            </div>
        </div>
    </div>

    <!-- Organizer Info -->
    {% if meeting.organizer %}
    <div class="extra content" style="background-color: #f8f9fa; padding: 10px; margin-top: 15px;">
        <div class="ui mini list">
            <div class="item">
                <i class="user icon"></i>
                <div class="content">
                    <strong>ผู้ประสานงาน:</strong> {{ meeting.organizer.name }}
                </div>
            </div>
            {% if meeting.organizer.email %}
            <div class="item">
                <i class="mail icon"></i>
                <div class="content">
                    <a href="mailto:{{ meeting.organizer.email }}">{{ meeting.organizer.email }}</a>
                </div>
            </div>
            {% endif %}
            {% if meeting.organizer.phone %}
            <div class="item">
                <i class="phone icon"></i>
                <div class="content">
                    {{ meeting.organizer.phone }}
                </div>
            </div>
            {% endif %}
        </div>
    </div>
    {% endif %}
    
    <!-- Action Button -->
    <div class="ui bottom attached button primary" onclick="window.location.href='{{ url_for('register_meeting', meeting_id=meeting.id) }}'">
        <i class="edit icon"></i> ลงทะเบียนเข้าร่วม
    </div>
</div>